/*
 * GeoMap — Israel regional map for the dashboard.
 *
 * Derived from the MapSVG geo-calibrated Israel SVG (CC-BY-4.0, mapsvg.com)
 * which uses geoViewBox="34.228663 33.434207 35.935383 29.496766".
 *
 * Coordinate transform to viewBox "0 0 400 600":
 *   sx = 400 / 294.625 = 1.3577
 *   sy = 600 / 792.604 = 0.7570
 *
 * Regions are based on Israel's administrative districts and natural regions:
 *   - Golan Heights (IL-GH) — real MapSVG path, northeast
 *   - Upper Galilee — eastern portion of Northern District (HaZafon),
 *     inland mountains east of ~35.10 E longitude
 *   - Western Galilee — western/coastal portion of Northern District,
 *     the Akko Plain and coast west of ~35.10 E longitude
 *   - Ashkelon Coast (Hof Ashkelon) — coastal strip in Southern District
 *     from ~31.50 N to ~31.80 N, between Ashdod and Gaza border
 *   - Gaza Envelope (Otef Aza) — ~7 km buffer east of Gaza Strip border,
 *     centered on Sderot (34.596 E, 31.523 N)
 *   - Centre context = Haifa + Tel Aviv + HaMerkaz + Jerusalem districts
 *   - Negev context = remainder of HaDarom (Southern District)
 */

const GEO_COLORS = {
  'רמת הגולן': { fill: '#7A6E9E', light: '#F0EDF7' },
  'גליל עליון': { fill: '#4A7C6F', light: '#E8F5F1' },
  'גליל מערבי': { fill: '#13DEB9', light: '#E6FBF5' },
  'חוף אשקלון': { fill: '#5D87FF', light: '#EBF1FF' },
  'עוטף עזה': { fill: '#FA896B', light: '#FFF0EB' },
}

/* ------------------------------------------------------------------ */
/*  SVG path data — derived from MapSVG geo-calibrated Israel map     */
/*  transformed to viewBox 0 0 400 600                                */
/* ------------------------------------------------------------------ */

// Golan Heights — real district path from MapSVG (IL-GH), scaled to 400x600
const PATH_GOLAN =
  'm 394.6 84.7 -4.2 4.1 -3.4 4.2 -3.8 2.3 -5.7 5.7 -7.3 4.7 -0.2 -0.5 -1.5 -0.5 -5.1 1.2 -2.4 0.2 -1.2 0.6 -0.9 1.2 -1.0 2.1 -5.3 0.4 -3.4 1.9 -3.7 1.5 -2.3 0.4 -1.7 0.6 -5.8 0.2 -2.8 1.0 0 0 -0.1 -1.0 -0.7 -0.4 -4.5 -1.1 -1.7 -0.7 0.1 -0.3 4.4 -2.5 2.6 -3.1 0.7 -2.7 0.4 -5.6 1.6 -3.5 0.4 -2.3 -0.6 -2.5 -1.0 -1.5 -3.0 -3.3 -2.1 -1.2 -1.0 -0.9 -1.8 0.4 -1.1 -0.3 -0.5 -0.7 0.1 -0.8 1.4 -1.7 0.5 -1.3 1.0 -7.9 -0.4 -3.6 -2.7 -2.8 -0.1 -0.7 3.8 -2.1 2.4 -2.6 1.1 -0.7 2.5 -0.4 0.7 0.4 0.1 -4.0 0.6 -3.4 3.5 -5.2 0.9 -1.9 0 -1.0 -1.1 -2.7 -0.4 -2.1 0.2 -3.4 1.1 -2.4 2.0 -2.6 -0.2 -0.4 -1.3 -0.4 -3.0 -0.2 -1.4 0.1 -3.1 0.9 -1.8 0.3 -1.7 -0.2 -2.0 -1.0 0 0 0.9 -1.2 1.1 -0.8 6.8 -1.8 7.2 -2.4 2.4 -1.3 3.5 -3.1 1.9 -1.0 1.5 -0.3 5.9 0.3 3.6 -0.3 4.7 -1.1 4.3 -2.0 1.4 -1.0 0.7 -1.2 1.1 -4.0 2.0 -1.8 3.6 -1.4 12.9 -4.0 1.2 0.5 0.3 1.1 -0.8 2.0 -2.4 2.3 -4.7 3.0 -2.0 2.9 -0.7 2.8 1.1 6.3 -0.4 1.1 -2.7 2.6 1.7 1.2 3.4 1.6 1.5 1.2 0.8 0.8 1.6 3.2 0.3 1.8 -0.5 1.2 -0.9 1.3 -2.1 1.3 -0.7 0.8 0.4 1.7 1.9 0.4 3.2 0.2 1.8 0.5 4.9 4.0 -0.6 4.1 -3.7 1.8 -0.4 0.6 0.5 0.8 2.6 1.7 0.3 0.7 -0.3 0.4 -1.2 0.4 -2.6 0.2 -4.7 -0.7 -1.0 0.4 -0.6 0.8 1.2 2.7 -0.7 4.9 1.2 2.2 2.0 10.3 4.1 3.1 0.8 1.1 0 0.9 -1.1 1.6 z'

// Northern District (HaZafon, IL-Z) — the entire north.
// This is the FULL path; we clip it into Upper Galilee & Western Galilee via
// a dividing line at roughly x ≈ 205 (≈ 35.10 E longitude).
// Upper Galilee = the portion east of x ≈ 205 (inland mountains, Safed, Hula)
// Western Galilee = the portion west of x ≈ 205 (Akko plain, Nahariya, coast)
//
// For the dashboard we use simplified polygons derived from the real outline
// with the divider at the geographic boundary between the Akko Plain and
// the Galilee mountains.

// Upper Galilee — eastern portion of Northern District
// Bounded: Metula in the north, Hula Valley/Golan border in the east,
// Beit HaKerem Valley in the south, ridge line ~35.10 E in the west
const PATH_UPPER_GALILEE =
  'M 205 53 L 219 42 L 240 30 L 260 26 L 280 25 L 295 28 L 314 24 L 316 24 ' +
  'L 316 30 L 310 38 L 306 47 L 300 55 L 295 60 L 290 63 L 280 70 L 275 73 ' +
  'L 267 79 L 260 82 L 252 86 L 248 90 L 252 95 L 260 99 L 270 105 ' +
  'L 278 111 L 285 117 L 285 125 L 280 135 L 272 143 L 265 150 L 255 157 ' +
  'L 245 162 L 235 165 L 220 163 L 210 158 L 205 155 ' +
  'L 205 53 Z'

// Western Galilee — western/coastal portion of Northern District
// Bounded: Rosh HaNikra in the north, coast in the west,
// Haifa Bay area in the south, ridge line ~35.10 E in the east
const PATH_WESTERN_GALILEE =
  'M 149 159 L 150 155 L 152 149 L 154 144 L 156 139 L 158 134 ' +
  'L 160 127 L 162 120 L 164 113 L 167 106 L 170 99 ' +
  'L 174 92 L 178 86 L 183 79 L 188 73 L 193 67 L 198 60 L 202 55 L 205 53 ' +
  'L 205 155 L 200 158 L 190 160 L 178 162 L 168 161 L 158 160 L 149 159 Z'

// Haifa District (IL-HA) — context (part of center)
const PATH_HAIFA =
  'm 149.4 158.7 -0.1 -0.1 0.3 -0.3 0.4 -0.1 0.2 -0.3 0 -0.1 -0.6 0 0.4 -0.3 0 -0.2 0.3 -0.3 0.5 -0.1 -0.1 -0.1 0.1 0 1.0 -2.6 0.1 -1.2 0.7 -1.2 0.4 -1.2 -0.5 -0.8 -2.9 0 0 -0.2 2.5 0 0.2 -0.1 0.1 -0.3 0.3 0.1 0.1 0.3 0.8 0 0.1 -0.1 -0.4 0 -0.2 -0.1 0 -0.2 0.3 0 0.1 -0.3 0 -0.2 -0.3 0 0 -0.1 0.3 0 0.1 0.1 0.2 0 0.3 -0.1 -0.1 -0.1 0.1 -0.5 0.7 -0.7 -0.1 -0.2 -0.4 0.1 -0.1 -0.6 0.3 -0.1 0 -0.3 0.3 -0.3 -0.1 -0.2 0.5 -0.3 0 -0.3 -0.3 -0.1 0.1 -0.5 0.5 -0.2 0.1 -0.6 0.6 -0.5 -0.6 0 -0.1 -0.2 0.3 0 0.4 -0.5 0.5 -1.3 0.3 -0.2 0.1 -0.6 0.3 -0.3 -0.1 -0.6 -0.4 0 -0.2 -0.1 0 -0.4 0.3 -0.6 0.5 -0.3 0.5 0 0.4 -0.4 -0.1 -0.2 -0.4 0 0 -0.3 -0.3 -0.1 0.8 -0.8 -0.2 -0.2 0.1 -0.3 0.4 -0.3 0.5 -1.1 0.3 0.1 0.1 -0.2 -0.1 -0.3 0.5 -0.6 -0.1 -0.3 -0.5 -0.3 0 -0.3 0.5 -0.3 0.2 -0.6 -0.3 -0.1 0 -0.2 0.4 -0.6 0.4 -0.3 -0.2 -0.2 0.2 -0.3 -0.1 -0.7 0.3 -0.3 0 -0.4 -0.2 -0.1 0.3 -0.4 0.3 -1.4 0.3 -0.1 0.3 -0.4 0.1 -1.2 0.4 -1.0 0.5 -0.4 -0.4 -0.1 0.3 -1.0 -0.1 -0.7 0.6 -0.3 0.1 -0.2 0.1 -1.4 0.4 -1.4 -0.1 -1.3 0.3 -0.3 0 -0.1 -0.3 -0.1 0 -0.2 0.1 -0.1 -0.1 -0.3 0.4 -0.2 -0.1 -0.3 -0.3 -0.1 0 -0.3 0.4 -0.6 0 -0.3 0.7 -0.5 0 -0.2 0.5 -0.3 0.9 0 0.7 -0.5 0.4 -0.6 0.3 -0.6 -0.2 -0.4 0.5 -0.3 0.3 -1.6 0.5 -0.7 0.5 -3.0 0.3 -0.6 0 -1.3 0.1 -0.6 0.3 -0.3 0.3 -2.2 -0.3 -0.7 0.3 0 0.1 -0.1 0.2 -1.0 -0.1 -0.5 -0.3 -0.3 0.2 0 0.1 -0.1 0.2 0.1 0.2 -0.1 0 -0.1 -0.2 0 0.2 -0.3 -0.3 -0.1 -0.2 -0.4 0 -1.4 0.3 -0.2 -0.3 -0.3 0.4 -0.3 0.6 0.1 1.4 -0.8 0.7 -0.1 0.9 0.1 1.2 -0.3 0.3 -0.3 0.2 -0.1 0.2 0.1 0.2 -0.2 0.6 0 0.9 0.2 0.6 0.6 0.6 0 0.3 0.2 1.2 0.3 0.7 0 0 0.1 0.3 0.2 1.8 0 1.7 -0.3 0 0.1 -0.8 0.2 -0.1 -0.1 -0.5 0.2 -0.3 0 -1.6 -0.1 -1.0 -0.2 -1.2 -0.5 -0.5 0.1 0.3 0.1 0.1 0.2 0.3 0.1 -0.1 0.2 1.4 0.4 0.2 0.2 0.3 0.1 0.4 0.3 0.1 0.3 0.3 -0.1 0 -0.4 0.3 0 0.1 0.4 0.3 0 0.1 -0.3 -0.3 -0.2 0 -0.2 0.1 -0.1 0.4 0.1 0.5 0.4 0.2 0.8 0.4 0.1 0.3 0.3 0.8 0 0.3 -0.1 0.7 -0.1 -0.2 -0.3 0.3 0 1.0 0.4 0.2 0.7 1.3 -0.2 0.1 -0.1 -0.2 -0.2 -0.7 0 -0.1 -0.4 -0.5 0.1 -0.4 -0.1 1.0 -0.2 2.1 -0.8 0.5 -0.1 0.3 -0.3 0.4 -0.1 0 -0.2 0.4 -0.1 0 -0.2 0.3 -0.2 0.4 -0.5 0.9 -0.5 1.4 -1.1 2.3 -3.0 0.4 -0.1 -0.1 -0.3 0.6 -1.1 0.3 -0.1 -0.1 -0.2 0.5 -0.8 0.3 -0.1 -0.1 -0.2 0.7 -1.2 -0.1 -0.2 0.6 -1.7 0.1 -1.9 -0.7 -0.7 0 0 1.6 -0.1 0.9 1.5 -0.7 2.8 0.4 0.1 0.2 0.9 0.5 0.8 0.9 0.6 1.2 0.4 0.5 0.4 -0.1 0.7 -0.8 1.7 0 0.6 2.1 0.6 2.4 1.2 4.4 0.7 1.5 0.6 0.2 0.6 -0.9 2.0 0.1 0.9 1.7 2.3 1.2 1.1 0.4 0.7 0.1 0.7 -0.4 0.8 -0.1 0.9 -3.4 3.0 -0.1 0.3 0.1 0.6 1.0 1.5 -0.1 0.3 -0.5 0.4 -2.2 0.9 0.5 0.8 0 0.3 -0.2 0.6 -0.4 0.5 -1.5 0.9 -0.8 0.2 -0.5 -0.1 -1.2 -1.1 -0.7 -0.3 -0.6 0.1 -0.6 0.3 -0.3 0.5 -0.1 1.2 0.4 0.5 1.1 0.5 0.8 0.6 0.1 0.9 -0.4 0.5 -0.6 0.3 -4.1 1.3 -0.8 0.6 -1.7 2.2 -0.7 0.6 -0.7 0.3 -1.0 0 -2.6 -0.7 -1.4 -0.2 -1.2 0 -1.3 0.3 -0.7 0.4 -0.9 0.9 -0.3 0.9 0.1 0.6 0.8 0.6 3.5 0.5 0.5 0.4 -0.2 0.6 -1.4 0.2 -1.1 -0.1 -1.8 -0.4 -1.8 0 -0.9 0.2 -0.5 0.4 0.2 0.6 0.7 0.3 0.4 0.1 0.9 0.6 0 1.3 0.4 0.8 0.7 0.3 1.1 -0.1 0.5 0.1 0.6 0.7 1.3 0.3 0.6 0.4 -0.1 1.0 -0.7 1.3 0.5 0.8 1.4 0.3 0.7 0.3 0.7 1.0 1.0 -0.1 0.4 -0.2 0.9 0.2 0.6 0.8 0.8 0.6 1.0 0.2 3.6 0 3.8 0.7 0.7 0 1.4 -0.3 1.0 -0.5 1.5 -1.6 1.5 -0.3 0.5 -0.4 0.4 -1.2 0.7 -0.3 2.5 -0.7 1.7 -1.5 1.4 -0.3 0.8 0.2 0.7 0.3 1.8 1.8 0.8 0.3 2.7 0.6 0.6 0.3 1.2 1.2 0 0 -3.0 1.9 -0.8 0.9 -2.8 1.5 -4.6 1.9 -5.8 1.7 -9.4 2.0 -1.8 0.7 -2.2 2.3 -1.0 2.1 -1.1 3.9 -2.0 3.2 -0.5 1.9 0 0 -1.1 0 -6.5 1.2 -1.7 0 -1.0 -0.1 -1.6 -1.2 -1.6 -0.5 -0.9 -0.9 -1.2 -0.7 -0.8 -0.3 -1.0 -0.2 -5.6 0 -3.6 -0.5 -3.6 -0.1 -2.3 0.2 -2.8 0.6 -1.7 0 -1.0 -0.1 -2.7 -0.6 -2.1 -0.2 z'

// Tel Aviv (IL-TA) — context (part of center)
const PATH_TEL_AVIV =
  'm 117.9 220.5 0.5 -1.1 0.5 -0.7 0.2 -1.0 0.5 -0.4 -0.3 -0.1 0.5 -0.9 0.4 -0.3 0 -0.3 0.3 -0.3 0.3 -0.2 0.2 -0.9 0.8 -0.3 0 -0.4 -0.3 -0.1 0.7 -0.4 0.4 0 0.6 -0.3 0.7 -0.6 0.5 -0.8 0.3 -0.3 0.1 -0.4 -0.1 -0.1 0.4 -0.1 -0.3 -0.2 0.2 -0.1 -0.1 0 0.1 -0.3 1.0 -1.3 0.1 -0.4 0.3 -0.1 0.2 -0.3 -0.3 -0.5 0 -0.4 0.5 -0.2 0.3 0.1 0.4 -0.7 0.6 -0.6 -0.3 -0.3 0.1 -0.3 0.2 0 0.1 0.2 0.3 0 0.7 -1.2 0.4 -1.3 0.6 -0.4 0.2 -0.3 -0.1 -0.2 0.2 -0.1 0.7 -1.4 0 -0.6 0.8 -1.1 -0.1 -0.5 0.7 -0.2 -0.1 -0.3 -0.5 -0.2 0.1 -1.0 0.3 -0.1 0.4 0.1 0.1 -0.1 0.9 -1.7 0.6 -1.9 0.5 -0.4 0 0 1.7 0 5.0 0.3 1.8 0.4 1.8 0.9 1.2 0.3 0.7 0.7 2.0 0.6 0.4 0.5 -0.1 2.0 -0.5 0.8 0.7 1.0 -0.1 1.3 -0.7 1.0 -1.6 1.6 -2.0 1.4 -0.3 1.2 -0.1 1.3 -0.3 0.5 -0.2 0.9 0.2 0.6 0.8 0.6 2.3 0.9 0.9 0.6 0.3 0.5 1.2 4.2 2.6 0.6 1.0 0.6 0.3 0.5 -0.1 0.7 -0.9 0.5 -2.3 -0.1 -1.6 0.2 -0.7 0.3 -0.3 0.3 -1.3 0.3 -0.9 -0.2 -1.2 -1.1 -1.3 -0.3 -1.2 0 -1.6 0.5 -3.1 2.1 -1.6 0.9 -2.0 0.3 -3.6 0.1 -1.6 -0.1 -2.0 -0.6 -4.2 0 -1.6 -0.2 -1.1 -0.5 z'

// HaMerkaz, Central District (IL-M) — context (part of center)
const PATH_CENTRAL =
  'm 103.8 240.8 2.1 -3.0 0.3 -0.6 0.7 -0.8 0 -0.2 0.3 -0.2 0.3 -0.9 0.4 -0.4 0.1 -0.5 0.3 0 0.1 -0.2 0.2 0 0 -0.3 0.1 -0.1 0.2 0 0 -0.2 0.1 0 0.5 -0.5 0.3 -0.1 0.1 -0.3 2.0 -1.6 1.7 -2.3 1.6 -2.4 2.9 -5.5 0 0 1.9 0.2 1.1 0.5 1.6 0.2 4.2 0 2.0 0.6 1.6 0.1 3.6 -0.1 2.0 -0.3 1.6 -0.8 3.1 -2.1 1.6 -0.5 1.2 0 1.3 0.3 1.2 1.1 0.9 0.2 1.3 -0.3 0.3 -0.3 0.7 -0.3 1.6 -0.2 2.3 0.1 0.9 -0.5 0.1 -0.7 -0.3 -0.5 -1.0 -0.6 -2.6 -0.6 -1.2 -4.2 -0.3 -0.5 -0.9 -0.6 -2.3 -0.9 -0.8 -0.6 -0.2 -0.6 0.2 -0.9 0.3 -0.5 0.1 -1.3 0.3 -1.2 2.0 -1.4 1.6 -1.6 0.7 -1.0 0.1 -1.3 -0.7 -1.0 0.5 -0.8 0.1 -2.0 -0.4 -0.5 -2.0 -0.6 -0.7 -0.7 -1.2 -0.3 -1.8 -0.9 -1.8 -0.4 -5.0 -0.3 -1.7 0 0 0 0.4 -0.6 0 -0.2 -0.2 -0.1 0.1 -0.2 0.7 -0.9 0.3 -0.2 -0.1 -0.3 0.6 -0.6 0.1 -0.5 0.7 -0.6 0.1 -0.6 0.3 -0.4 -0.1 -0.4 0.5 -0.3 0 -0.7 0.4 -1.1 0.4 -0.3 0.7 -1.0 -0.1 -0.5 0.3 -0.2 0.3 -0.6 -0.1 -0.1 0.7 -1.1 0.1 -0.6 -0.2 0 0 -0.1 0.5 -0.4 0.1 -1.0 0.7 -0.8 0.1 -0.4 0.6 -0.7 -0.1 -0.5 0.3 0.1 0.2 -0.1 -0.1 -0.7 0.3 -0.8 0.3 -0.1 -0.1 -0.3 1.0 -2.4 0 -0.2 -0.3 -0.1 -0.1 -0.2 0.8 -0.3 0.1 -0.1 0.4 -1.4 0.3 -0.4 0 -0.5 0.4 -0.4 1.1 -2.8 0 -0.5 0.3 -0.9 -0.4 0 0 -0.1 0.7 -0.4 0.2 -0.3 0.1 -0.6 -0.1 -0.5 0.4 -0.9 -0.4 -0.2 0.3 -0.4 0.3 -0.1 0.5 -0.8 0.2 -0.1 0.2 -0.6 0 0 3.0 -0.1 2.1 0.2 2.7 0.6 1.1 0.1 1.7 -0.1 2.8 -0.6 2.3 -0.2 3.6 0.1 3.6 0.5 5.6 0 1.0 0.2 0.8 0.3 1.2 0.7 0.9 0.9 1.6 0.5 1.6 1.2 1.1 0.1 1.7 0 6.5 -1.2 1.1 0 0 0 -0.5 2.0 -1.6 0.9 -6.1 1.5 -1.6 1.1 -2.5 2.6 -0.3 4.1 1.1 4.4 -0.8 1.1 -2.0 0.8 -3.2 2.6 -4.2 5.3 -0.4 1.8 0.1 1.8 3.2 2.7 1.3 1.5 1.8 4.4 0.3 2.0 -0.7 1.6 -1.9 2.0 -0.3 1.2 0.7 1.0 2.4 1.5 2.7 2.9 0.8 1.8 -0.5 2.3 -1.9 2.3 0.1 1.0 0.4 0.8 -1.0 0.5 1.0 1.5 -3.2 3.8 0.6 3.5 3.6 2.7 5.3 2.4 1.1 2.5 -2.1 3.6 -11.7 1.2 -0.2 0.2 0 0 -6.0 -0.1 -3.6 -0.3 -2.1 0.1 -1.7 0.8 -2.1 3.4 -2.5 0.9 -7.5 0.9 -3.8 0.8 -4.8 2.6 -1.0 1.5 0 0 -0.5 0 -0.7 0.3 -1.5 0.9 -2.4 1.8 -1.2 0.7 -0.7 0.3 -1.5 0.2 -0.8 -0.3 -1.3 -1.0 -1.7 -2.9 -0.6 -0.7 -1.1 -0.8 -1.3 -0.6 -4.0 -1.3 -0.5 -0.1 -1.5 0.9 -0.7 0.3 -1.0 0.1 -2.2 -0.2 -1.1 0.1 0.2 0.4 1.8 0.4 0.4 0.8 1.3 0.7 0.1 0.3 -0.6 0.4 -0.6 0 -1.5 -0.2 -0.5 0.1 -0.1 1.0 -0.7 0.4 -2.1 0.2 -0.6 -0.1 -1.4 -0.6 -1.4 -0.2 -2.6 -0.1 -1.1 -0.5 -0.3 -0.5 0 -0.4 0.5 -0.4 1.1 -0.4 1.8 -0.4 0.7 -0.3 0.4 -0.5 -0.2 -0.6 -0.8 -0.6 -2.4 -0.7 -0.6 -0.8 0 -0.6 0.7 -0.7 0.8 -0.3 0.6 -0.1 2.4 0.5 1.0 0.1 1.2 0 0.7 -0.3 -0.1 -1.7 0.6 -1.1 -0.5 -1.1 0.1 -0.3 1.8 -1.1 0.2 -0.6 -0.4 -0.4 -0.9 -0.3 -2.3 0.5 -1.6 -0.1 -1.4 -1.0 -1.2 0.1 -0.7 0.3 -0.9 0.2 z'

// Jerusalem District (IL-JM) — context (part of center)
const PATH_JERUSALEM =
  'm 232.1 261.7 -0.3 0.3 -11.8 0.2 -10.0 2.3 -12.2 6.7 -11.0 2.9 -3.9 1.9 -7.1 4.3 -2.1 2.0 0 0 -5.1 -2.2 -0.8 -0.2 -3.6 -0.5 -1.3 -1.0 -1.0 -0.5 -3.2 -1.0 -3.4 -1.3 -3.6 -1.1 -0.6 -0.8 0.4 -1.2 0 -1.1 -0.6 -1.1 0.2 -1.2 -0.3 -2.3 0.2 -0.6 0.7 -0.7 0.1 -1.0 -0.1 -0.6 -1.1 -1.6 -0.1 -0.6 1.2 -1.4 0 -0.6 -1.2 -0.8 -0.8 -0.2 -1.2 -0.1 -2.1 0.3 -0.8 -0.3 -0.5 -0.4 -1.0 -1.9 -1.0 -1.2 -1.5 -1.2 -1.3 -0.7 -0.4 0 0 0 1.0 -1.5 4.8 -2.6 3.8 -0.8 7.5 -0.9 2.5 -0.9 2.1 -3.4 1.7 -0.8 2.1 -0.1 3.6 0.3 6.0 0.1 0 0 -2.7 2.2 2.0 4.1 4.5 1.1 6.5 0.5 6.0 -1.2 4.4 -2.7 4.5 -1.5 5.2 2.7 4.7 1.3 10.1 2.3 10.9 0 4.3 2.5 -0.7 5.5 z'

// Southern District (IL-D) — the entire south. We use it as context (Negev)
// but carve out Ashkelon Coast and Gaza Envelope as overlay regions.
const PATH_SOUTH =
  'm 292.1 302.4 -0.1 7.8 -0.8 3.1 -3.9 6.1 -8.9 8.9 -2.7 3.1 -2.5 2.5 -1.2 3.1 2.7 3.2 10.4 7.8 1.9 2.2 1.2 3.2 0.2 2.4 -1.6 3.9 -1.4 2.8 -9.0 7.7 -1.0 3.1 0.6 2.5 1.9 3.0 0 3.1 -4.1 2.1 -8.8 3.2 -6.2 7.7 -0.1 2.7 1.2 2.5 -1.2 3.1 -4.5 0.9 -3.5 2.4 -2.1 3.1 0 6.2 -3.3 4.3 -5.7 5.8 -1.2 3.4 -3.5 1.8 -6.9 7.4 -0.6 2.5 -5.3 13.7 -1.6 2.7 -3.2 2.6 -0.9 2.0 8.1 8.5 1.2 2.3 -0.7 1.8 -5.2 3.2 -1.5 2.6 0.8 3.0 -4.4 5.5 7.3 18.1 -18.1 14.5 -4.9 10.8 0.7 11.7 -6.9 7.7 -1.0 2.8 0.7 2.2 -0.7 3.0 -4.0 9.3 0 5.0 0.6 3.1 0.1 2.9 -3.1 2.1 -4.2 1.7 -3.6 2.3 -2.5 2.8 -2.3 3.6 -0.5 -0.1 -1.0 0 -0.6 -0.3 -0.5 0 -0.2 0.4 -0.3 0.1 -0.1 0.4 -0.3 0.2 -0.1 0.2 -0.6 0 -0.1 0.2 -0.6 0.1 -0.3 0.3 -0.2 0.6 -0.6 0.5 -0.5 0 0 0.1 -0.7 0.5 -0.8 0.3 -0.2 0.4 -0.9 0.5 0 0.6 -0.6 0.2 -0.8 0.7 -0.5 0.2 0 0.4 -1.0 0.7 -1.0 0.3 -5.9 -3.8 -3.1 -3.2 -1.1 -2.5 -0.9 -4.4 2.2 -4.1 1.1 -4.1 -1.1 -2.8 -4.2 -4.1 0.2 -7.2 -23.9 -37.5 0.5 -2.3 -7.6 -11.7 -20.2 -31.8 -4.8 -10.0 -16.3 -6.0 -0.6 -4.6 4.8 -7.6 -10.2 -6.6 0.7 -8.2 -6.8 -15.7 -20.6 -24.1 -13.4 -21.8 -19.3 -35.7 10.5 -4.4 10.4 -5.0 2.6 -2.6 -0.1 -4.1 -0.6 -4.4 2.0 -3.8 7.8 -5.6 23.5 -12.7 6.8 -0.9 2.1 -2.1 0 -2.9 -3.2 -2.6 -10.2 -5.3 5.6 -5.1 1.0 -0.3 0.5 -0.4 -0.1 -0.1 -0.4 -0.1 0.1 -0.4 -0.2 -0.1 0 -0.1 0.8 -0.5 0 0.2 -0.6 0.4 0.7 0.1 0.1 0.1 0.2 0 3.6 -3.3 0.5 -0.9 0.8 -0.3 1.3 -0.9 0.5 -0.6 -0.1 -0.2 0.7 -0.5 0.4 -0.6 0.3 -0.1 0.1 0.2 0.3 0 4.0 -3.9 0.7 -0.6 1.8 -2.0 1.0 -0.7 0.5 -0.8 2.6 -2.5 2.3 -2.8 1.2 -1.1 1.2 -1.6 0.4 -0.4 0.2 -0.1 -0.1 -0.1 0.7 -0.7 0.7 -1.0 0.8 -0.8 1.0 -1.3 -0.7 -0.4 -0.4 -0.7 0.1 -0.6 0.6 -0.9 0.2 0 0 0.3 -0.3 0.1 -0.4 0.5 0 0.7 0.8 0.8 0.5 0 0.1 -0.2 -0.7 -0.2 0 -0.1 0.3 -0.1 -0.1 -0.4 0.2 -0.1 0.1 -0.3 0 -0.1 -0.3 -0.1 0 -0.2 0.6 0 0.3 0.2 1.5 0 0.1 -0.2 0.5 -0.3 0.1 -0.2 -0.3 -0.1 -0.1 -0.2 0.1 -1.1 0.2 -0.1 0.1 0.2 0.2 0 0 -0.1 0.5 -0.2 1.9 -2.7 1.5 -1.8 0 0 0.9 0 0.9 -0.2 0.7 -0.3 1.2 -0.1 1.4 1.0 1.6 0.1 2.3 -0.5 0.9 0.3 0.4 0.4 -0.2 0.6 -1.8 1.1 -0.1 0.3 0.5 1.1 -0.6 1.1 0.1 1.6 -0.7 0.3 -1.2 0 -1.0 -0.1 -2.4 -0.5 -0.6 0.1 -0.8 0.3 -0.7 0.7 0 0.6 0.6 0.8 2.4 0.7 0.8 0.6 0.2 0.6 -0.4 0.5 -0.7 0.3 -1.8 0.4 -1.1 0.4 -0.5 0.4 0 0.4 0.3 0.5 1.1 0.5 2.6 0.1 1.4 0.2 1.4 0.6 0.6 0.1 2.1 -0.2 0.7 -0.4 0.1 -1.0 0.5 -0.1 1.5 0.2 0.6 0 0.6 -0.4 -0.1 -0.3 -1.3 -0.7 -0.4 -0.8 -1.8 -0.4 -0.2 -0.4 1.1 -0.1 2.2 0.2 1.0 -0.1 0.7 -0.3 1.5 -0.9 0.5 0.1 4.0 1.3 1.3 0.6 1.1 0.8 0.6 0.7 1.7 2.9 1.3 1.0 0.8 0.3 1.5 -0.2 0.7 -0.3 1.2 -0.7 2.4 -1.8 1.5 -0.9 0.7 -0.3 0.5 0 0 0 0.4 0 1.3 0.7 1.5 1.2 1.0 1.2 1.0 1.9 0.5 0.4 0.8 0.3 2.1 -0.3 1.2 0.1 0.8 0.2 1.2 0.8 0 0.6 -1.2 1.4 0.1 0.6 1.1 1.6 0.1 0.6 -0.1 1.0 -0.7 0.7 -0.2 0.6 0.3 2.3 -0.2 1.2 0.6 1.1 0 1.1 -0.4 1.2 0.6 0.8 3.6 1.1 3.4 1.3 3.2 1.0 1.1 0.5 1.3 1.0 3.6 0.5 0.8 0.2 5.1 2.2 0 0 -3.6 3.0 -2.1 5.7 1.0 6.2 -0.9 2.6 -4.7 5.0 -5.2 3.7 -4.5 5.1 0.6 3.0 2.6 2.4 3.8 1.7 5.8 0.9 10.6 -0.8 9.8 -1.4 9.6 0.4 13.5 0.5 4.9 -1.4 3.2 0.4 5.1 -0.5 4.4 -0.2 5.6 -0.6 3.4 -1.2 6.8 -3.9 5.8 -3.7 7.6 -1.9 7.8 -3.2 8.3 -4.1 3.7 -0.7 15.5 0.1 z'

// Ashkelon Coast — simplified polygon based on Hof Ashkelon Regional Council
// Coastal strip from ~Ashdod (31.80N) to ~Gaza border (31.50N)
// Width extends from coast (~34.35E) to ~34.65E inland
// In dashboard coords: roughly x 28-99, y 249-295
const PATH_ASHKELON_COAST =
  'M 20 249 L 28 249 L 55 248 L 75 249 L 95 253 L 99 260 ' +
  'L 99 270 L 97 280 L 92 289 L 85 294 ' +
  'L 70 297 L 50 296 L 35 293 L 22 288 L 15 278 L 14 265 L 17 254 Z'

// Gaza Envelope — simplified polygon based on 7km buffer around Gaza border
// Centered around Sderot (dash: 86,291), includes Sha'ar HaNegev,
// Sdot Negev, and Eshkol regional councils
// In dashboard coords: roughly x 5-100, y 281-340
const PATH_GAZA_ENVELOPE =
  'M 5 281 L 30 278 L 60 280 L 85 285 L 98 295 ' +
  'L 102 310 L 98 325 L 90 335 L 75 340 ' +
  'L 50 342 L 30 338 L 15 330 L 5 318 L 2 300 Z'

export default function GeoMap({ plants }) {
  const counts = {}
  plants.forEach((p) => {
    counts[p.geography] = (counts[p.geography] || 0) + 1
  })

  return (
    <div className="bg-card rounded-card shadow-card p-6">
      <h2 className="text-lg font-bold text-text-main mb-1">מפת פריסה גיאוגרפית</h2>
      <p className="text-sm text-text-muted mb-4">מפעלים לפי אזור בצפון ובדרום</p>
      <div className="flex justify-center">
        <svg
          viewBox="0 0 400 600"
          width="100%"
          style={{ maxWidth: 420 }}
          xmlns="http://www.w3.org/2000/svg"
          fontFamily="Heebo, sans-serif"
          direction="rtl"
        >
          {/* Background: full Southern District (Negev) — no data, context */}
          <path
            d={PATH_SOUTH}
            fill="#E5E7EB"
            stroke="#fff"
            strokeWidth="1.5"
            opacity={0.2}
          />
          <text x={175} y={500} textAnchor="middle" fontSize="12" fill="#A1B4CE">
            נגב
          </text>

          {/* Context: Jerusalem District */}
          <path
            d={PATH_JERUSALEM}
            fill="#E5E7EB"
            stroke="#fff"
            strokeWidth="1.5"
            opacity={0.25}
          />

          {/* Context: Central District (HaMerkaz) */}
          <path
            d={PATH_CENTRAL}
            fill="#E5E7EB"
            stroke="#fff"
            strokeWidth="1.5"
            opacity={0.3}
          />
          <text x={140} y={260} textAnchor="middle" fontSize="12" fill="#A1B4CE">
            מרכז
          </text>

          {/* Context: Tel Aviv */}
          <path
            d={PATH_TEL_AVIV}
            fill="#E5E7EB"
            stroke="#fff"
            strokeWidth="1.5"
            opacity={0.3}
          />

          {/* Context: Haifa District */}
          <path
            d={PATH_HAIFA}
            fill="#E5E7EB"
            stroke="#fff"
            strokeWidth="1.5"
            opacity={0.3}
          />

          {/* === DATA REGIONS === */}

          {/* Golan Heights — real MapSVG district path, northeast */}
          <path
            d={PATH_GOLAN}
            fill={counts['רמת הגולן'] ? GEO_COLORS['רמת הגולן'].fill : '#E5E7EB'}
            stroke="#fff"
            strokeWidth="2"
            opacity={counts['רמת הגולן'] ? 1 : 0.4}
          />
          <Label
            x={350}
            y={62}
            name="רמת הגולן"
            count={counts['רמת הגולן']}
            color={GEO_COLORS['רמת הגולן']}
          />

          {/* Upper Galilee — eastern portion of Northern District */}
          <path
            d={PATH_UPPER_GALILEE}
            fill={counts['גליל עליון'] ? GEO_COLORS['גליל עליון'].fill : '#E5E7EB'}
            stroke="#fff"
            strokeWidth="2"
            opacity={counts['גליל עליון'] ? 1 : 0.4}
          />
          <Label
            x={255}
            y={92}
            name="גליל עליון"
            count={counts['גליל עליון']}
            color={GEO_COLORS['גליל עליון']}
          />

          {/* Western Galilee — western/coastal portion of Northern District */}
          <path
            d={PATH_WESTERN_GALILEE}
            fill={counts['גליל מערבי'] ? GEO_COLORS['גליל מערבי'].fill : '#E5E7EB'}
            stroke="#fff"
            strokeWidth="2"
            opacity={counts['גליל מערבי'] ? 1 : 0.4}
          />
          <Label
            x={184}
            y={115}
            name="גליל מערבי"
            count={counts['גליל מערבי']}
            color={GEO_COLORS['גליל מערבי']}
          />

          {/* Ashkelon Coast — southwest coast */}
          <path
            d={PATH_ASHKELON_COAST}
            fill={counts['חוף אשקלון'] ? GEO_COLORS['חוף אשקלון'].fill : '#E5E7EB'}
            stroke="#fff"
            strokeWidth="2"
            opacity={counts['חוף אשקלון'] ? 1 : 0.4}
          />
          <Label
            x={58}
            y={268}
            name="חוף אשקלון"
            count={counts['חוף אשקלון']}
            color={GEO_COLORS['חוף אשקלון']}
          />

          {/* Gaza Envelope — south near Gaza */}
          <path
            d={PATH_GAZA_ENVELOPE}
            fill={counts['עוטף עזה'] ? GEO_COLORS['עוטף עזה'].fill : '#E5E7EB'}
            stroke="#fff"
            strokeWidth="2"
            opacity={counts['עוטף עזה'] ? 1 : 0.4}
          />
          <Label
            x={55}
            y={308}
            name="עוטף עזה"
            count={counts['עוטף עזה']}
            color={GEO_COLORS['עוטף עזה']}
          />
        </svg>
      </div>
    </div>
  )
}

function Label({ x, y, name, count, color }) {
  if (!count) return null
  return (
    <g>
      {/* Background pill */}
      <rect
        x={x - 28}
        y={y - 14}
        width={56}
        height={28}
        rx={14}
        fill="white"
        fillOpacity={0.9}
      />
      <text
        x={x}
        y={y + 6}
        textAnchor="middle"
        fontSize="18"
        fontWeight="800"
        fill={color.fill}
      >
        {count}
      </text>
      <text
        x={x}
        y={y + 24}
        textAnchor="middle"
        fontSize="11"
        fontWeight="600"
        fill={color.fill}
      >
        {name}
      </text>
    </g>
  )
}
